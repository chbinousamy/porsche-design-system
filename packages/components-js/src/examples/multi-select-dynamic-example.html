<button id="btn-reset" type="button">Reset value</button>
<button id="btn-add" type="button">Add option</button>
<button id="btn-add-selected" type="button">Add selected option</button>
<button id="btn-add-disabled" type="button">Add disabled option</button>
<button id="btn-remove" type="button">Remove last option</button>

<p-text></p-text>

<p-multi-select name="name">
  <p-multi-select-option value="1">Option 1</p-multi-select-option>
  <p-multi-select-option value="2">Option 2</p-multi-select-option>
  <p-multi-select-option value="3">Option 3</p-multi-select-option>
</p-multi-select>

<script>
  const debugElement = document.querySelector('p-text');
  const multiSelect = document.querySelector('p-multi-select');
  let selectedValues = ['1', '2'];
  multiSelect.value = selectedValues;
  setDebugText();

  multiSelect.addEventListener('update', () => {
    setDebugText();
  });

  document.querySelector('#btn-add').addEventListener('click', () => {
    addOption();
  });

  document.querySelector('#btn-add-selected').addEventListener('click', () => {
    addOption(true);
  });

  document.querySelector('#btn-add-disabled').addEventListener('click', () => {
    addOption(_, true);
  });

  document.querySelector('#btn-remove').addEventListener('click', () => {
    multiSelect.lastChild.remove();
  });

  document.querySelector('#btn-reset').addEventListener('click', () => {
    multiSelect.value = selectedValues;
  });

  function setDebugText() {
    debugElement.innerText = `Selected values: ${multiSelect.value.join(', ') || 'none'}`;
  }

  function addOption(isSelected = false, isDisabled = false) {
    const child = document.createElement('p-multi-select-option');
    child.innerText = `Option ${multiSelect.children.length + 1}`;
    child.setAttribute('value', multiSelect.children.length + 1);
    isSelected && child.setAttribute('selected', 'true');
    isDisabled && child.setAttribute('disabled', 'true');
    multiSelect.append(child);
  }
</script>
