# Pin Code

The Pin Code component currently uses multiple event listeners in order to update the input values depending on the type
of insertion. This is necessary since the information in these events will vary depending on the insertion type and
keyboard type. For standard european keyboards we could use the keydown listener and handle everything from there. When
using an asian keyboard sometimes an Input Method Editor (IME) is used. These IME keyboards won't provide the
information which key was pressed in the keydown listener and can't be prevented in the keydown listener. Instead we
have to use the beforeinput event since this is the only event including the pressed key where the default can be
prevented. Theoretically we could use the beforeinput event for any type of keyboard since this event will fire under
most circumstances. However when it comes to the keyboard autosuggestion the behavior will again differ depending on the
device. In some cases the input event listener can insert the suggested text and in other cases the keydown handler will
work.

This makes the whole keyboard handling in the Pin Code component very unreliable. Below you can see an overview of the
differences in behavior for standard digit input via keyboard press.

|                     | Default keyboard (macOS Chrome)                                                        | IME keyboard (Android)                                                                       | Default keyboard (Android)                                                                  | IME keyboard (iOS)                                                                           | Default keyboard (iOS)                                                                 |
| ------------------- | -------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |
| keydown             | ✅                                                                                     | ✅                                                                                           | ✅                                                                                          | ✅                                                                                           | ✅                                                                                     |
| keydown key         | '1'                                                                                    | 'Unidentified'                                                                               | '1'                                                                                         | '1'                                                                                          | '1'                                                                                    |
| keydown code        | 'Digit1'                                                                               | ''                                                                                           | ''                                                                                          | 'Digit1'                                                                                     | 'Digit1'                                                                               |
| keydown keyCode     | 49                                                                                     | 229                                                                                          | 49                                                                                          | 229                                                                                          | 49                                                                                     |
| keydown prevent     | ✅ (No number is typed when only this event is prevented)                              | ❌ (Number still typed when only this is prevented, Other keys like backspace are prevented) | ✅ (No number is typed when only this event is prevented) No beforeinput/input events fired | ❌ (Number still typed when only this is prevented, Other keys like backspace are prevented) | ✅ (No number is typed when only this event is prevented)                              |
| beforeinput         | ✅                                                                                     | ✅                                                                                           | ✅                                                                                          | ✅                                                                                           | ✅                                                                                     |
| beforeinput data    | '1'                                                                                    | '1'                                                                                          | '1'                                                                                         | '1'                                                                                          | '1'                                                                                    |
| beforeinput prevent | ✅ (No number is typed when only this event is prevented) No input event fired anymore | ✅ (No number is typed when only this event is prevented) No input event fired anymore       | ✅ (No number is typed when only this event is prevented) No input event fired anymore      | ✅ (No number is typed when only this event is prevented) No input event fired anymore       | ✅ (No number is typed when only this event is prevented) No input event fired anymore |
| input               | ✅                                                                                     | ✅                                                                                           | ✅                                                                                          | ✅                                                                                           | ✅                                                                                     |
| input data          | '1'                                                                                    | '1'                                                                                          | '1'                                                                                         | '1'                                                                                          | '1'                                                                                    |
| input prevent       | ❌ (Number and other keys still typed when only this is prevented)                     | ❌ (Number and other keys still typed when only this is prevented)                           | ❌ (Number and other keys still typed when only this is prevented)                          | ❌ (Number and other keys still typed when only this is prevented)                           | ❌ (Number and other keys still typed when only this is prevented)                     |
