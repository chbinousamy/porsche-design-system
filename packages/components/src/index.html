<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Porsche Design System - Playground</title>
    <base href="/" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" type="text/css" href="http://localhost:3001/styles/font-face.min.css" />
    <script nomodule src="build/porsche-design-system.js"></script>
    <script type="module" src="build/porsche-design-system.esm.js"></script>
    <!-- to pass partial validation via validateGetInitialStylesUsage() -->
    <style data-pds-initial-styles>
      html,
      body {
        margin: 0;
        padding: 0;
      }

      /* Playground */
      .playground {
        /* TODO: we should generate background colors with scss or js styles package */
        --theme-light-background-base: #fff;
        --theme-light-background-surface: #eeeff2;
        --theme-dark-background-base: #0e0e12;
        --theme-dark-background-surface: #212225;
        padding: 16px;
      }

      .playground.light,
      .playground.auto {
        background: var(--theme-light-background-base);
      }

      .playground.light.surface,
      .playground.auto.surface {
        background: var(--theme-light-background-surface);
      }

      .playground.dark {
        background: var(--theme-dark-background-base);
      }

      .playground.dark.surface {
        background: var(--theme-dark-background-surface);
      }

      @media (prefers-color-scheme: dark) {
        .playground.auto {
          background: var(--theme-dark-background-base);
        }

        .playground.auto.surface {
          background: var(--theme-dark-background-surface);
        }
      }

      .playground.auto-layout-inline,
      .playground.auto-layout-block {
        display: flex;
        flex-wrap: wrap;
        align-items: flex-start;
        gap: 16px;
      }

      .playground.auto-layout-inline {
        flex-direction: row;
      }

      .playground.auto-layout-block {
        flex-direction: column;
      }

      .playground[title]::before {
        content: attr(title);
        display: block;
        width: 100%;
        font: 12px/16px 'Porsche Next';
        color: deeppink;
        text-align: left;
      }

      .playground:not([class*='auto-layout'])::before {
        margin-bottom: 16px;
      }

      p-button-tile {
        width: 100%;
        max-width: 300px;
      }

      p-carousel div {
        display: flex;
        align-items: center;
        justify-content: center;
        background: #00b0f4;
        height: 100px;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Porsche Design System - Playground</h1>
    </header>

    <main>
      <p-accordion heading="Some Heading" tag="h3">
        <p-text>
          Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et
          dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.
        </p-text>
      </p-accordion>
      <p-accordion heading="Some Heading" tag="h3">
        <p-text>
          Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et
          dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum.
        </p-text>
      </p-accordion>

      <p-button type="button">Open Banner</p-button>
      <p-banner open="false" heading="Some Heading" description="Some Description"></p-banner>

      <p-button>Some label</p-button>
      <p-button loading>Some label</p-button>
      <p-button disabled>Some label</p-button>

      <p-button-pure>Some label</p-button-pure>
      <p-button-pure disabled="true">Some label</p-button-pure>
      <p-button-pure loading="true">Some label</p-button-pure>

      <p-button-tile label="Some Label" description="Default">
        <img src="./assets/image-grid.png" width="50" height="50" alt="Some alt text" />
      </p-button-tile>

      <p-carousel heading="Some heading">
        <div>Slide 1</div>
        <div>Slide 2</div>
        <div>Slide 3</div>
        <div>Slide 4</div>
      </p-carousel>

      <p-checkbox-wrapper label="Some label" hide-label="false">
        <input type="checkbox" name="some-name" />
      </p-checkbox-wrapper>

      <p-button id="flyout" type="button" aria="{ 'aria-haspopup': 'dialog' }">Open Flyout</p-button>
      <p-flyout open="false">
        <p-text>Some content that dynamically scales the width of the flyout.</p-text>
      </p-flyout>

      <p-button id="modal" type="button" aria="{ 'aria-haspopup': 'dialog' }">Open Modal</p-button>
      <p-modal heading="Some Heading" open="false" aria="{ 'aria-label': 'Some Heading' }">
        <p-text>Some Content</p-text>
        <p-button-group>
          <p-button type="button">Save</p-button>
          <p-button type="button" variant="tertiary" icon="close">Close</p-button>
        </p-button-group>
      </p-modal>

      <p-multi-select name="name" label="Some Label" description="Some description" theme="light" required>
        <p-multi-select-option value="a">Option A</p-multi-select-option>
        <p-multi-select-option value="b">Option B</p-multi-select-option>
        <p-multi-select-option value="c">Option C</p-multi-select-option>
        <p-multi-select-option value="d">Option D</p-multi-select-option>
        <p-multi-select-option value="e">Option E</p-multi-select-option>
        <p-multi-select-option value="f">Option F</p-multi-select-option>
      </p-multi-select>

      <p-pagination total-items-count="500" items-per-page="25" active-page="1"></p-pagination>

      <p-popover>Some additional content.</p-popover>

      <div style="max-width: 600px">
        <p-scroller>
          <p-tag color="primary">
            <button type="button">Some tag content</button>
          </p-tag>
          <p-tag color="notification-info-soft">
            <button type="button">Some tag content</button>
          </p-tag>
          <p-tag color="notification-warning-soft">
            <button type="button">Some tag content</button>
          </p-tag>
          <p-tag color="primary">
            <button type="button">Some tag content</button>
          </p-tag>
          <p-tag color="notification-info-soft">
            <button type="button">Some tag content</button>
          </p-tag>
          <p-tag color="notification-warning-soft">
            <button type="button">Some tag content</button>
          </p-tag>
          <p-tag color="primary">
            <button type="button">Some tag content</button>
          </p-tag>
          <p-tag color="notification-info-soft">
            <button type="button">Some tag content</button>
          </p-tag>
        </p-scroller>
      </div>

      <p-select-wrapper label="Some label" hide-label="false">
        <select name="some-name">
          <option value="a">Option A</option>
          <option value="b">Option B</option>
          <option value="c">Option C</option>
          <option value="d">Option D</option>
          <option value="e">Option E</option>
          <option value="f">Option F</option>
        </select>
      </p-select-wrapper>

      <p-stepper-horizontal>
        <p-stepper-horizontal-item state="current">Enter personal details</p-stepper-horizontal-item>
        <p-stepper-horizontal-item>Confirm e-mail</p-stepper-horizontal-item>
        <p-stepper-horizontal-item>Set password</p-stepper-horizontal-item>
      </p-stepper-horizontal>

      <div id="step-content-0">
        <p-text>A form with personal details could be displayed here.</p-text>
      </div>
      <div id="step-content-1" hidden>
        <p-text>A form with a verification code input field could be displayed here.</p-text>
      </div>
      <div id="step-content-2" hidden>
        <p-text>A form with a password input field could be displayed here.</p-text>
      </div>

      <p-button-group>
        <p-button type="button" id="prev-button" icon="arrow-head-left" variant="tertiary" disabled="true"
          >Previous Step</p-button
        >
        <p-button type="button" id="next-button" variant="primary">Next Step</p-button>
      </p-button-group>

      <p-switch hide-label="false">Some label</p-switch>
      <p-switch hide-label="false" checked="true">Some label</p-switch>

      <p-tabs-bar active-tab-index="0">
        <button type="button">Tab One</button>
        <button type="button">Tab Two</button>
        <button type="button">Tab Three</button>
      </p-tabs-bar>

      <p-tag icon="car" color="background-base">
        <button type="button">Color background-base</button>
      </p-tag>

      <p-tag-dismissible color="background-base">Color background-base</p-tag-dismissible>

      <p-text-field-wrapper label="Some label" hide-label="false">
        <input type="text" name="some-name" />
      </p-text-field-wrapper>
      <p-text-field-wrapper label="Some label" hide-label="false">
        <input type="text" placeholder="Some placeholder" name="some-name" />
      </p-text-field-wrapper>

      <p-textarea-wrapper label="Some label" hide-label="false">
        <textarea name="some-name"></textarea>
      </p-textarea-wrapper>

      <button id="toast" type="button">Queue Toast</button>
      <p-toast></p-toast>
    </main>

    <script>
      <!-- START: keep this snippet to log component lifecycle events -->
      ['componentWillLoad', 'componentDidLoad', 'componentWillUpdate', 'componentDidUpdate'].forEach((x) =>
        window.addEventListener(`stencil_${x}`, (e) => {
          const eventName = e.type + (e.type.includes('Did') ? ' ' : '');
          console.log(eventName, e.composedPath()[0].tagName.toLowerCase(), new Date().toISOString());
        })
      );

      const accordions = document.querySelectorAll('p-accordion');
      accordions.forEach((accordion) =>
        accordion.addEventListener('update', (e) => {
          e.target.open = e.detail.open;
        })
      );

      const banner = document.querySelector('p-banner');
      banner.addEventListener('dismiss', () => {
        banner.open = false;
      });
      document.querySelector('p-button').addEventListener('click', () => (banner.open = true));

      const flyout = document.querySelector('p-flyout');
      flyout.addEventListener('dismiss', () => {
        flyout.open = false;
      });
      document.querySelector('#flyout').addEventListener('click', () => {
        flyout.open = true;
      });

      const modal = document.querySelector('p-modal');
      modal.addEventListener('dismiss', () => {
        modal.open = false;
      });
      document.querySelector('#modal').addEventListener('click', () => {
        modal.open = true;
      });

      const stepper = document.querySelector('p-stepper-horizontal');
      const stepElements = Array.from(document.querySelectorAll('p-stepper-horizontal-item'));
      const prevButton = document.querySelector('#prev-button');
      const nextButton = document.querySelector('#next-button');
      const panels = document.querySelectorAll('[id^="step-content"]');

      function getActiveStepIndex(steps) {
        return steps.findIndex((step) => step.state === 'current');
      }

      function manageContent(activeStepIndex) {
        if (activeStepIndex === 0) {
          prevButton.setAttribute('disabled', 'true');
        } else {
          prevButton.removeAttribute('disabled');
        }

        if (activeStepIndex === stepElements.length - 1) {
          nextButton.setAttribute('disabled', 'true');
        } else {
          nextButton.removeAttribute('disabled');
        }

        panels.forEach((panel, i) => {
          if (i === activeStepIndex) {
            panel.removeAttribute('hidden');
          } else {
            panel.setAttribute('hidden', '');
          }
        });
      }

      function onNextPrevStep(direction) {
        const activeStepIndex = getActiveStepIndex(stepElements);

        if (direction === 'next') {
          stepElements[activeStepIndex].state = 'complete';
          stepElements[activeStepIndex + 1].state = 'current';
          manageContent(activeStepIndex + 1);
        } else {
          stepElements[activeStepIndex].state = undefined;
          stepElements[activeStepIndex - 1].state = 'current';
          manageContent(activeStepIndex - 1);
        }
      }

      prevButton.addEventListener('click', () => onNextPrevStep('prev'));
      nextButton.addEventListener('click', () => onNextPrevStep('next'));

      stepper.addEventListener('update', (e) => {
        const { activeStepIndex } = e.detail;

        for (let i = activeStepIndex + 1; i < stepElements.length; i++) {
          // reset step state when going back via stepper horizontal item click
          stepElements[i].state = undefined;
        }
        stepElements[activeStepIndex].state = 'current';

        manageContent(activeStepIndex);
      });

      const tabsBar = document.querySelector('p-tabs-bar');
      tabsBar.addEventListener('update', (e) => {
        e.target.activeTabIndex = e.detail.activeTabIndex;
      });

      const toast = document.querySelector('p-toast');
      let counter = 1;

      customElements.whenDefined('p-toast').then(() => {
        document.querySelector('#toast').addEventListener('click', () => {
          toast.addMessage({ text: `Some message ${counter}`, state: 'info' });
          counter++;
        });
      });
    </script>
    <!-- /END -->
  </body>
</html>
